/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/balls.ts":
/*!**********************!*\
  !*** ./src/balls.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _spawner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spawner */ \"./src/spawner.ts\");\n\nvar time = 0;\nvar all_balls = [];\nvar upcoming_balls = [];\nvar Balls = /** @class */ (function () {\n    function Balls() {\n    }\n    Balls.prototype.draw_colors = function () {\n        var spawner = new _spawner__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        var new_balls_amount = 3;\n        var losing_line = 78;\n        var colors = ['#FF0000', '#00FF00', '#0000FF', '#FFFFFF', '#00FFFF', '#FFFF00', '#FF00FF'];\n        var all_fields = spawner.getFullMap();\n        function newGame() {\n            window.location.reload();\n        }\n        if (all_balls.length >= losing_line) {\n            var timer_controller = spawner.getTimerController();\n            clearInterval(timer_controller);\n            var points = document.querySelector(\"#points\").innerHTML;\n            var time_val = document.querySelector('#clock').innerHTML;\n            var site = \"\\n\\n            <div class='interface'></div>\\n            <div class='winning_screen'>\\n                <h1>Congratulations!</h1>\\n                <p>You scored <b>\".concat(points, \"</b> points, the game lasted <b>\").concat(time_val, \"</b> </p>\\n                <button id=\\\"ng_button\\\">Play Again!</button>\\n            </div>\\n        \");\n            document.body.innerHTML = site;\n            var new_game_button = document.querySelector(\"#ng_button\");\n            new_game_button.addEventListener(\"click\", newGame);\n            return;\n        }\n        for (var i = 0; i < new_balls_amount; i++) {\n            var position = all_fields[Math.floor(Math.random() * spawner.size)][Math.floor(Math.random() * spawner.size)];\n            if (position.children.length == 1)\n                i -= 1;\n            else {\n                var ball = document.createElement('div');\n                ball.className = 'ball';\n                if (upcoming_balls.length !== 0) {\n                    ball.style.backgroundColor = colors[upcoming_balls[upcoming_balls.length - 1]];\n                    upcoming_balls.pop();\n                }\n                else {\n                    ball.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];\n                }\n                position.appendChild(ball);\n                all_balls.push(position);\n            }\n        }\n        upcoming_balls.push(Math.floor(Math.random() * colors.length), Math.floor(Math.random() * colors.length), Math.floor(Math.random() * colors.length));\n        for (var j = 0; j < upcoming_balls.length; j++) {\n            var id_n = 'n' + j.toString();\n            var next_ball = document.createElement('div');\n            var host = document.querySelector('#incoming');\n            document.querySelector('#' + id_n).remove();\n            next_ball.style.backgroundColor = colors[upcoming_balls[j]];\n            next_ball.className = 'next_ball';\n            next_ball.id = id_n;\n            host.appendChild(next_ball);\n        }\n    };\n    Balls.prototype.isPossibleToPick = function (pole) {\n        var spawner = new _spawner__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        var line_size = 8;\n        var all_fields = spawner.getFullMap();\n        var possible = true;\n        for (var n = 0; n < all_fields.length; n++) {\n            for (var w = 0; w < all_fields[n].length; w++) {\n                if (all_fields[n][w] === pole) {\n                    if (n - 1 < 0 && w - 1 < 0) {\n                        if (all_fields[n + 1][w].childNodes[0] !== undefined && all_fields[n][w + 1].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else if (n + 1 > line_size && w + 1 > line_size) {\n                        if (all_fields[n - 1][w].childNodes[0] !== undefined && all_fields[n][w - 1].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else if (n - 1 < 0 && w + 1 > line_size) {\n                        if (all_fields[n + 1][w].childNodes[0] !== undefined && all_fields[n][w - 1].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else if (w - 1 < 0 && n + 1 > line_size) {\n                        if (all_fields[n - 1][w].childNodes[0] !== undefined && all_fields[n][w + 1].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else if (w - 1 < 0) {\n                        if (all_fields[n + 1][w].childNodes[0] !== undefined && all_fields[n][w + 1].childNodes[0] !== undefined && all_fields[n - 1][w].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else if (w + 1 > line_size) {\n                        if (all_fields[n + 1][w].childNodes[0] !== undefined && all_fields[n][w - 1].childNodes[0] !== undefined && all_fields[n - 1][w].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else if (n - 1 < 0) {\n                        if (all_fields[n + 1][w].childNodes[0] !== undefined && all_fields[n][w - 1].childNodes[0] !== undefined && all_fields[n][w + 1].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else if (n + 1 > line_size) {\n                        if (all_fields[n - 1][w].childNodes[0] !== undefined && all_fields[n][w - 1].childNodes[0] !== undefined && all_fields[n][w + 1].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                    else {\n                        if (all_fields[n + 1][w].childNodes[0] !== undefined && all_fields[n - 1][w].childNodes[0] !== undefined && all_fields[n][w + 1].childNodes[0] !== undefined && all_fields[n][w - 1].childNodes[0] !== undefined)\n                            possible = false;\n                    }\n                }\n            }\n        }\n        return possible;\n    };\n    Balls.prototype.getAllBalls = function () {\n        return all_balls;\n    };\n    Balls.prototype.startTimer = function () {\n        time++;\n        var minutes = Math.floor(time / 60);\n        var seconds = time % 60;\n        var formattedMinutes = String(minutes).padStart(2, '0');\n        var formattedSeconds = String(seconds).padStart(2, '0');\n        document.querySelector('#clock').innerHTML = \"\".concat(formattedMinutes, \":\").concat(formattedSeconds);\n    };\n    return Balls;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Balls);\n\n\n//# sourceURL=webpack://test/./src/balls.ts?");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _spawner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spawner */ \"./src/spawner.ts\");\n\nvar game = new _spawner__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\ngame.startGame();\n\n\n//# sourceURL=webpack://test/./src/index.ts?");

/***/ }),

/***/ "./src/points.ts":
/*!***********************!*\
  !*** ./src/points.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _balls__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./balls */ \"./src/balls.ts\");\n/* harmony import */ var _spawner__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./spawner */ \"./src/spawner.ts\");\n\n\nvar Points = /** @class */ (function () {\n    function Points() {\n        this.points = 0;\n    }\n    Points.prototype.getPoints = function () {\n        var balls = new _balls__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\n        var spawner = new _spawner__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n        var all_fields = spawner.getFullMap();\n        var all_balls = balls.getAllBalls();\n        var winning_line = 5;\n        var to_remove = [];\n        var checkLine = function (i, j, di, dj) {\n            var first_ball = all_fields[i][j].childNodes[0];\n            var counter = 0;\n            while (all_fields[i + counter * di] &&\n                all_fields[i + counter * di][j + counter * dj] &&\n                all_balls.includes(all_fields[i + counter * di][j + counter * dj])) {\n                var color_check = all_fields[i + counter * di][j + counter * dj].childNodes[0];\n                if (first_ball.style.backgroundColor == color_check.style.backgroundColor) {\n                    counter++;\n                    if (counter >= winning_line) {\n                        for (var x = 0; x < counter; x++) {\n                            var row = i + x * di;\n                            var col = j + x * dj;\n                            if (!to_remove.includes(all_fields[row][col])) {\n                                to_remove.push(all_fields[row][col]);\n                            }\n                        }\n                    }\n                }\n                else {\n                    break;\n                }\n            }\n            return counter >= winning_line;\n        };\n        for (var i = 0; i < all_fields.length; i++) {\n            for (var j = 0; j < all_fields[i].length; j++) {\n                if (all_balls.includes(all_fields[i][j])) {\n                    if (checkLine(i, j, 0, 1) || checkLine(i, j, 1, 0) || checkLine(i, j, 1, 1) || checkLine(i, j, 1, -1)) {\n                        break;\n                    }\n                }\n            }\n        }\n        if (to_remove.length >= winning_line) {\n            var _loop_1 = function (t) {\n                var index = all_balls.indexOf(to_remove[t]);\n                if (index !== -1) {\n                    all_balls.splice(index, 1);\n                }\n                try {\n                    var ballElement_1 = to_remove[t].querySelector('.ball');\n                    if (ballElement_1) {\n                        ballElement_1.classList.add('pop-out');\n                        setTimeout(function () {\n                            to_remove[t].removeChild(ballElement_1);\n                        }, 200);\n                    }\n                }\n                catch (e) {\n                    console.error(\"Error removing ball element:\", e);\n                }\n            };\n            for (var t = 0; t < to_remove.length; t++) {\n                _loop_1(t);\n            }\n            this.points += to_remove.length;\n            var pointHolder = document.querySelector(\"#points\");\n            if (pointHolder) {\n                pointHolder.innerHTML = this.points.toString();\n            }\n        }\n    };\n    return Points;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Points);\n\n\n//# sourceURL=webpack://test/./src/points.ts?");

/***/ }),

/***/ "./src/shortest_path.ts":
/*!******************************!*\
  !*** ./src/shortest_path.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _spawner__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./spawner */ \"./src/spawner.ts\");\n/* harmony import */ var _balls__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./balls */ \"./src/balls.ts\");\n\n\n//BFS\nvar ShortestPath = /** @class */ (function () {\n    function ShortestPath() {\n    }\n    ShortestPath.prototype.find_path = function (start, cel) {\n        var spawner = new _spawner__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        var balls = new _balls__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        var all_balls = balls.getAllBalls();\n        var all_fields = spawner.getFullMap();\n        var queue = [];\n        var parent = {};\n        var path = [];\n        queue.push(start);\n        var visited = {};\n        visited[start.id] = true;\n        parent[start.id] = -1;\n        while (queue.length > 0) {\n            var first = queue.shift();\n            var neighbors = this.checkNeighbors(first, all_fields);\n            if (first.id == cel.id) {\n                return path;\n            }\n            for (var i = 0; i < neighbors.length; i++) {\n                if (all_balls.indexOf(neighbors[i]) !== -1) {\n                    continue;\n                }\n                if (visited[neighbors[i].id] == undefined) {\n                    visited[neighbors[i].id] = true;\n                    if (neighbors[i].id == cel.id) {\n                        path.push(neighbors[i]);\n                        while (first.id !== start.id) {\n                            path.push(first);\n                            first = parent[first.id];\n                        }\n                        path.push(first);\n                        path.reverse();\n                        return path;\n                    }\n                    parent[neighbors[i].id] = first;\n                    queue.push(neighbors[i]);\n                }\n            }\n        }\n    };\n    ShortestPath.prototype.checkNeighbors = function (first, all_fields) {\n        var connections = [];\n        for (var n = 0; n < all_fields.length; n++) {\n            for (var w = 0; w < all_fields[n].length; w++) {\n                if (all_fields[n][w] == first) {\n                    if (n - 1 < 0 && w - 1 < 0) {\n                        connections.push(all_fields[n + 1][w], all_fields[n][w + 1]);\n                    }\n                    else if (n + 1 > 8 && w + 1 > 8) {\n                        connections.push(all_fields[n - 1][w], all_fields[n][w - 1]);\n                    }\n                    else if (w + 1 > 8 && n - 1 < 0) {\n                        connections.push(all_fields[n + 1][w], all_fields[n][w - 1]);\n                    }\n                    else if (w - 1 < 0 && n + 1 > 8) {\n                        connections.push(all_fields[n - 1][w], all_fields[n][w + 1]);\n                    }\n                    else if (w - 1 < 0) {\n                        connections.push(all_fields[n + 1][w], all_fields[n][w + 1], all_fields[n - 1][w]);\n                    }\n                    else if (w + 1 > 8) {\n                        connections.push(all_fields[n + 1][w], all_fields[n][w - 1], all_fields[n - 1][w]);\n                    }\n                    else if (n - 1 < 0) {\n                        connections.push(all_fields[n + 1][w], all_fields[n][w - 1], all_fields[n][w + 1]);\n                    }\n                    else if (n + 1 > 8) {\n                        connections.push(all_fields[n - 1][w], all_fields[n][w - 1], all_fields[n][w + 1]);\n                    }\n                    else {\n                        connections.push(all_fields[n + 1][w], all_fields[n - 1][w], all_fields[n][w + 1], all_fields[n][w - 1]);\n                    }\n                }\n            }\n        }\n        return connections;\n    };\n    return ShortestPath;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ShortestPath);\n\n\n//# sourceURL=webpack://test/./src/shortest_path.ts?");

/***/ }),

/***/ "./src/spawner.ts":
/*!************************!*\
  !*** ./src/spawner.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _balls__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./balls */ \"./src/balls.ts\");\n/* harmony import */ var _shortest_path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shortest_path */ \"./src/shortest_path.ts\");\n/* harmony import */ var _points__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./points */ \"./src/points.ts\");\n\n\n\nvar full_map = [];\nvar timer_controller;\nvar Spawner = /** @class */ (function () {\n    function Spawner() {\n        this.size = 9;\n    }\n    Spawner.prototype.startGame = function () {\n        var _this = this;\n        var is_selected = false;\n        var path_preview = false;\n        var selected_fields = [];\n        var balls = new _balls__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n        var shortest_path = new _shortest_path__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        var points = new _points__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n        var all_balls = balls.getAllBalls();\n        timer_controller = setInterval(function () {\n            balls.startTimer();\n        }, 1000);\n        for (var i = 0; i < this.size; i++) {\n            full_map[i] = [];\n            var _loop_1 = function (j) {\n                var field = document.createElement('div');\n                field.className = 'field';\n                field.id = ((i * this_1.size) + j).toString();\n                document.querySelector('#stage').append(field);\n                full_map[i][j] = field;\n                field.onmousemove = function () {\n                    if (path_preview == true && field.children.length == 0 && is_selected == true) {\n                        var path_1 = shortest_path.find_path(selected_fields[selected_fields.length - 1], field);\n                        if (path_1 !== undefined) {\n                            path_1.forEach(function (element) {\n                                element.style.backgroundColor = '#D3D3D3';\n                                for (var k = 0; k < _this.size * _this.size; k++) {\n                                    if (path_1.indexOf(document.getElementById(k.toString())) < 0) {\n                                        document.getElementById(k.toString()).style.backgroundColor = '#afafaf';\n                                    }\n                                }\n                            });\n                        }\n                    }\n                };\n                field.onclick = function () {\n                    path_preview = true;\n                    if (field.children.length == 1 && field.children[0].style.border == '2px solid rgb(0, 0, 0)') {\n                        path_preview = false;\n                        is_selected = false;\n                        field.children[0].style.border = 'none';\n                        full_map.forEach(function (element) {\n                            element.forEach(function (el) {\n                                el.style.background = \"#afafaf\";\n                            });\n                        });\n                    }\n                    else if (field.children.length == 1) {\n                        all_balls.forEach(function (element) {\n                            element.children[0].style.border = \"none\";\n                        });\n                        full_map.forEach(function (element) {\n                            element.forEach(function (el) {\n                                el.style.background = \"#afafaf\";\n                            });\n                        });\n                        var check = balls.isPossibleToPick(field);\n                        field.children[0].style.border = '2px solid #000000';\n                        if (check == false)\n                            return;\n                        else {\n                            if (field.style.backgroundColor == '#D3D3D3') {\n                                for (var x = 0; x < _this.size * _this.size; x++) {\n                                    document.getElementById(x.toString()).style.backgroundColor = '#afafaf';\n                                }\n                                field.style.backgroundColor = '#afafaf';\n                                is_selected = false;\n                            }\n                            else if (is_selected == false) {\n                                is_selected = true;\n                                field.style.backgroundColor = '#D3D3D3';\n                            }\n                            else {\n                                selected_fields[selected_fields.length - 1].style.backgroundColor = '#afafaf';\n                                selected_fields.pop();\n                                field.style.backgroundColor = '#D3D3D3';\n                            }\n                            selected_fields.push(field);\n                        }\n                    }\n                    else if (field.children.length == 0 && is_selected == true) {\n                        var path_2 = shortest_path.find_path(selected_fields[selected_fields.length - 1], field);\n                        path_2[0].children[0].style.border = 'none';\n                        if (path_2 !== undefined) {\n                            for (var y = 0; y < all_balls.length; y++) {\n                                if (all_balls[y] == selected_fields[selected_fields.length - 1]) {\n                                    all_balls.splice(y, 1);\n                                }\n                            }\n                            var start_1 = selected_fields[selected_fields.length - 1];\n                            all_balls.push(field);\n                            setTimeout(function () {\n                                field.appendChild(start_1.childNodes[0]);\n                                is_selected = false;\n                                balls.draw_colors();\n                                path_2.forEach(function (element) {\n                                    element.style.backgroundColor = '#d3d3d3';\n                                    var clear = setInterval(function () {\n                                        element.style.backgroundColor = '#afafaf';\n                                        clearInterval(clear);\n                                    }, 500);\n                                });\n                                points.getPoints();\n                            }, 2);\n                        }\n                    }\n                };\n            };\n            var this_1 = this;\n            for (var j = 0; j < this.size; j++) {\n                _loop_1(j);\n            }\n        }\n        balls.draw_colors();\n    };\n    Spawner.prototype.getFullMap = function () {\n        return full_map;\n    };\n    Spawner.prototype.getTimerController = function () {\n        return timer_controller;\n    };\n    return Spawner;\n}());\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Spawner);\n\n\n//# sourceURL=webpack://test/./src/spawner.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.ts");
/******/ 	
/******/ })()
;